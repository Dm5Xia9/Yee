@inherits YeeSection
@using Yee.Section.Navigation
@inject NavigationManager _navManager
@using Yee.Section.Prototypes

@foreach (var item in MenuItems.Value)
{
    if (item is Yee.Section.Navigation.GroupMenuItem groupNavItem)
    {
        <li class="has-dropdown @(Class.ToString())">
            <a @onclick="() => ToNav(item.Link)" href="#" class="@Active(item)">@item.Title</a>
            <div class="dropdown-wrapper">
                <ul>
                    @foreach (var child in groupNavItem.ChildItems)
                    {
                        <li>
                            <a @onclick="() => ToNav(child.Link)" href="#" class="@Active(child)">@child.Title</a>
                        </li>
                    }

                </ul>
            </div>
        </li>
    }
    if (item is Yee.Section.Navigation.ActionMenuItem navItem)
    {
        <li>
            <a @onclick="() => ToNav(item.Link)" href="#" class="@Active(item)">@item.Title</a>
        </li>
    }
}

@code {
    [Parameter]
    [System.ComponentModel.DisplayName("Элементы меню")]
    public ProtoNavigation MenuItems { get; set; }

    [Parameter]
    public ProtoCssClass Class { get; set; }

    public string Active(IMenuItem menuItem)
    {
        if (menuItem.IsActive(NavigationManager.Uri))
        {
            return "active";
        }

        return "";
    }
}
